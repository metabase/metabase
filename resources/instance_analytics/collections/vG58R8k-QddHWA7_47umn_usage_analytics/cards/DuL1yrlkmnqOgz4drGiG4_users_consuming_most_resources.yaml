name: Users consuming most resources
description: null
entity_id: DuL1yrlkmnqOgz4drGiG4
created_at: '2023-11-01T11:34:51.583773Z'
creator_id: internal@metabase.com
display: line
archived: false
collection_id: vG58R8k-QddHWA7_47umn
collection_preview: true
collection_position: null
query_type: query
database_id: Internal Metabase Database
table_id: [Internal Metabase Database, public, v_query_log]
enable_embedding: false
embedding_params: null
made_public_by_id: null
public_uuid: null
parameters: []
parameter_mappings: []
dataset_query:
  database: Internal Metabase Database
  query:
    aggregation:
    - - sum
      - - field
        - [Internal Metabase Database, public, v_query_log, running_time_seconds]
        - {base-type: type/Float}
    breakout:
    - - field
      - [Internal Metabase Database, public, v_query_log, started_at]
      - {base-type: type/DateTimeWithLocalTZ, temporal-unit: week}
    - - field
      - [Internal Metabase Database, public, v_query_log, user_id]
      - {base-type: type/Integer}
    - - field
      - [Internal Metabase Database, public, v_users, full_name]
      - {base-type: type/Text, join-alias: People - User}
    filter:
    - and
    - - time-interval
      - - field
        - [Internal Metabase Database, public, v_query_log, started_at]
        - {base-type: type/DateTimeWithLocalTZ}
      - -12
      - week
      - {include-current: false}
    - - not-empty
      - - field
        - [Internal Metabase Database, public, v_query_log, dashboard_qualified_id]
        - {base-type: type/Text}
    joins:
    - alias: People - User
      condition:
      - =
      - - field
        - [Internal Metabase Database, public, v_query_log, user_id]
        - {base-type: type/Integer}
      - - field
        - [Internal Metabase Database, public, v_users, user_id]
        - {base-type: type/Integer, join-alias: People - User}
      fields: all
      source-table: 0wVIfjBJWclD0lKeABYYl
      strategy: left-join
    - alias: Group Members - User
      condition:
      - =
      - - field
        - [Internal Metabase Database, public, v_query_log, user_id]
        - {base-type: type/Integer}
      - - field
        - [Internal Metabase Database, public, v_group_members, user_id]
        - {base-type: type/Integer, join-alias: Group Members - User}
      fields: all
      source-table: lTp-ATFsCUFEr9I0fMEaO
      strategy: left-join
    limit: 200
    order-by:
    - - desc
      - [aggregation, 0]
    source-table: QOtZaiTLf2FDD4AT6Oinb
  type: query
result_metadata:
- active: true
  base_type: type/DateTimeWithLocalTZ
  database_type: timestamptz
  display_name: 'Started At: Week'
  effective_type: type/DateTimeWithLocalTZ
  field_ref:
  - field
  - [Internal Metabase Database, public, v_query_log, started_at]
  - {temporal-unit: week}
  id: [Internal Metabase Database, public, v_query_log, started_at]
  inherited_temporal_unit: week
  name: started_at
  position: 1
  semantic_type: type/CreationTimestamp
  source: breakout
  table_id: [Internal Metabase Database, public, v_query_log]
  unit: week
  visibility_type: normal
  lib/breakout?: true
  lib/card-id: 277
  lib/deduplicated-name: started_at
  lib/desired-column-alias: started_at
  lib/model-display-name: Started At
  lib/original-display-name: Started At
  lib/original-name: started_at
  lib/source: source/previous-stage
  lib/source-column-alias: started_at
  metabase.lib.field/temporal-unit: week
  qp/implicit-field?: true
- active: true
  base_type: type/Integer
  database_type: int4
  display_name: User ID
  effective_type: type/Integer
  field_ref:
  - field
  - [Internal Metabase Database, public, v_query_log, user_id]
  - null
  fk_target_field_id: [Internal Metabase Database, public, v_users, user_id]
  id: [Internal Metabase Database, public, v_query_log, user_id]
  name: user_id
  options: {metabase.query-processor.middleware.add-remaps/original-field-dimension-id: 72}
  position: 7
  semantic_type: type/FK
  source: breakout
  table_id: [Internal Metabase Database, public, v_query_log]
  visibility_type: normal
  lib/breakout?: true
  lib/card-id: 277
  lib/deduplicated-name: user_id
  lib/desired-column-alias: user_id
  lib/external-remap: {field-id: 136726, id: 72, name: User ID, lib/type: metadata.column.remapping/external}
  lib/model-display-name: User ID
  lib/original-display-name: User ID
  lib/original-name: user_id
  lib/source: source/previous-stage
  lib/source-column-alias: user_id
  qp/implicit-field?: true
- active: true
  base_type: type/Text
  database_type: text
  display_name: People - User â†’ Full Name
  effective_type: type/Text
  field_ref:
  - field
  - [Internal Metabase Database, public, v_users, full_name]
  - {join-alias: People - User}
  id: [Internal Metabase Database, public, v_users, full_name]
  name: full_name
  position: 6
  semantic_type: type/Name
  source: breakout
  source_alias: People - User
  table_id: [Internal Metabase Database, public, v_users]
  visibility_type: normal
  lib/breakout?: true
  lib/card-id: 282
  lib/deduplicated-name: full_name
  lib/desired-column-alias: People - User__full_name
  lib/model-display-name: Full Name
  lib/original-display-name: Full Name
  lib/original-join-alias: People - User
  lib/original-name: full_name
  lib/source: source/joins
  lib/source-column-alias: full_name
  metabase.lib.join/join-alias: People - User
  qp/implicit-field?: true
- base_type: type/Float
  display_name: Sum of Running Time Seconds
  effective_type: type/Float
  field_ref: [aggregation, 0]
  name: sum
  source: aggregation
  lib/deduplicated-name: sum
  lib/desired-column-alias: sum
  lib/original-name: sum
  lib/source: source/aggregations
  lib/source-column-alias: sum
visualization_settings:
  column_settings: null
  graph.dimensions: [started_at, full_name]
  graph.metrics: [sum]
  graph.series_order: null
  graph.series_order_dimension: null
card_schema: 23
serdes/meta:
- {id: DuL1yrlkmnqOgz4drGiG4, label: users_consuming_most_resources, model: Card}
archived_directly: false
dashboard_id: Glqmoytsnu0n6rfLUjock
document_id: null
embedding_type: null
source_card_id: QOtZaiTLf2FDD4AT6Oinb
type: question
