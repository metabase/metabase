name: SDK

on:
  workflow_call:
    inputs:
      cli-snippets-type-check:
        description: "Whether to run cli snippets type check."
        required: true
        type: boolean
      docs-snippets-type-check:
        description: "Whether to run docs snippets type check."
        required: true
        type: boolean
      documentation-validation:
        description: "Whether to run documentation generation validation check."
        required: true
        type: boolean
      component-tests:
        description: "Whether to run component tests."
        required: true
        type: boolean
      host-sample-apps-tests:
        description: "Whether to run host and sample apps compatibility tests."
        required: true
        type: boolean
      skip:
        description: Whether to skip running tests due to one of the artifacts failing to build.
        required: true
        type: boolean

concurrency:
  group: ${{ github.workflow }}-${{ github.head_ref && github.ref || github.run_id }}
  cancel-in-progress: true

jobs:
  not-required-embedding-sdk-apps-compatibility-tests:
    name: "SDK e2e tests for compatibility with (host/sample) apps"
    if: inputs.host-sample-apps-tests && !inputs.skip
    uses: ./.github/workflows/embedding-sdk-host-sample-apps-tests.yml
    secrets: inherit
