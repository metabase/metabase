type: v0/model
ref: product-performance
name: Product Performance Model
description: Product analytics model showing sales performance, inventory metrics, and ratings
database: Sample Database

# SQL query that defines the model's data
# Note: This example demonstrates various data type scenarios using the Sample Database
query: |
  SELECT 
    p.ID AS product_id,
    p.TITLE AS product_name,
    p.CATEGORY,
    p.EAN AS product_code,
    p.VENDOR,
    p.PRICE,
    p.RATING,
    p.CREATED_AT AS product_created,
    COUNT(DISTINCT o.ID) AS order_count,
    COUNT(DISTINCT o.USER_ID) AS unique_buyers,
    SUM(o.QUANTITY) AS total_units_sold,
    SUM(o.SUBTOTAL) AS gross_revenue,
    SUM(o.TOTAL) AS net_revenue,
    AVG(o.DISCOUNT) AS avg_discount,
    AVG(o.TAX) AS avg_tax,
    MAX(o.CREATED_AT) AS last_order_date,
    MIN(o.CREATED_AT) AS first_order_date,
    CASE 
      WHEN SUM(o.SUBTOTAL) > 10000 THEN 'Star Product'
      WHEN SUM(o.SUBTOTAL) > 5000 THEN 'High Performer'
      WHEN SUM(o.SUBTOTAL) > 1000 THEN 'Standard'
      WHEN SUM(o.SUBTOTAL) > 0 THEN 'Low Performer'
      ELSE 'No Sales'
    END AS performance_tier,
    CASE
      WHEN p.RATING >= 4.5 THEN 'Excellent'
      WHEN p.RATING >= 4.0 THEN 'Good'
      WHEN p.RATING >= 3.0 THEN 'Average'
      WHEN p.RATING IS NOT NULL THEN 'Poor'
      ELSE 'Not Rated'
    END AS rating_category
  FROM PRODUCTS p
  LEFT JOIN ORDERS o ON p.ID = o.PRODUCT_ID
  GROUP BY p.ID, p.TITLE, p.CATEGORY, p.EAN, p.VENDOR, p.PRICE, p.RATING, p.CREATED_AT

# Column metadata for better usability
# Note: Models CANNOT use coercion_strategy - that's only for database fields
columns:
  - name: product_id
    display_name: Product ID
    description: Unique identifier for each product
    base_type: Big Integer
    semantic_type: Entity Key
    
  - name: product_name
    display_name: Product Name
    description: Full product title
    base_type: Text
    semantic_type: Entity Name
    
  - name: category
    display_name: Product Category
    description: Product categorization
    base_type: Text
    effective_type: Category
    semantic_type: Category
    
  - name: product_code
    display_name: EAN/Barcode
    description: European Article Number or product barcode
    base_type: Text
    semantic_type: Barcode
    
  - name: vendor
    display_name: Vendor/Supplier
    description: Company that supplies this product
    base_type: Text
    semantic_type: Company
    
  - name: price
    display_name: List Price
    description: Current selling price of the product
    base_type: Float
    semantic_type: Price
    currency: USD
    
  - name: rating
    display_name: Customer Rating
    description: Average customer rating (1-5 scale)
    base_type: Float
    semantic_type: Score
    
  - name: product_created
    display_name: Product Launch Date
    description: When the product was added to catalog
    base_type: DateTime
    semantic_type: Creation timestamp
    
  - name: order_count
    display_name: Total Orders
    description: Number of orders containing this product
    base_type: Integer
    semantic_type: Quantity
    
  - name: unique_buyers
    display_name: Unique Customers
    description: Number of different customers who purchased this product
    base_type: Integer
    semantic_type: Quantity
    
  - name: total_units_sold
    display_name: Units Sold
    description: Total quantity of this product sold
    base_type: Integer
    semantic_type: Quantity
    
  - name: gross_revenue
    display_name: Gross Revenue
    description: Total revenue before taxes and discounts
    base_type: Float
    semantic_type: Currency
    currency: USD
    
  - name: net_revenue
    display_name: Net Revenue
    description: Total revenue after taxes and discounts
    base_type: Float
    semantic_type: Currency
    currency: USD
    
  - name: avg_discount
    display_name: Average Discount
    description: Average discount applied to this product
    base_type: Float
    semantic_type: Discount
    currency: USD
    
  - name: avg_tax
    display_name: Average Tax
    description: Average tax amount on this product
    base_type: Float
    semantic_type: Currency
    currency: USD
    
  - name: last_order_date
    display_name: Last Sale Date
    description: Most recent order date for this product
    base_type: DateTime
    semantic_type: Updated timestamp
    
  - name: first_order_date
    display_name: First Sale Date
    description: Earliest order date for this product
    base_type: DateTime
    
  - name: performance_tier
    display_name: Performance Tier
    description: Product classification based on revenue (Star Product, High Performer, Standard, Low Performer, No Sales)
    base_type: Text
    effective_type: Category
    semantic_type: Category
    
  - name: rating_category
    display_name: Rating Category
    description: Categorized rating (Excellent, Good, Average, Poor, Not Rated)
    base_type: Text
    effective_type: Category
    semantic_type: Category