title: Orders Metrics (Autogenerated)
table_type: TransactionTable
description: Autogenerated dashboard
metrics:
- AvgDiscount:
    metric: [/, [sum, [dimension, Discount]], [sum, [dimension, Income]]]
- TotalIncome:
    metric: [sum, [dimension, Income]]
- AvgQuantity:
    metric: [avg, [dimension, Quantity]]
- TotalOrders: [count]
dimensions:
- Timestamp:
    field_type: CreationTimestamp
- Timestamp:
    field_type: DateTime
- State:
    field_type: UserTable.State
- Income:
    field_type: Income
- Discount: Discount
- Quantity:
    field_type: Quantity
- UserID: UserTable.PK
- UserFK:
    field_type: FK
    links_to: UserTable
- JoinDate:
    field_type: UserTable.JoinTimestamp
    score: 100
- JoinDate:
    field_type: UserTable.CreationTimestamp
    score: 90
- JoinDate:
    field_type: UserTable.DateTime
    score: 30
cards:
- IncomeByMonth:
    visualization: line
    title: Sales by month
    description: Total income by month
    dimensions: Timestamp
    metrics:
      - TotalIncome
      - TotalOrders
- AverageQuantityByMonth:
    visualization: line
    title: Average quantity by month
    description: Average item quantity by month
    dimensions: Timestamp
    metrics: AvgQuantity
- AverageDiscountByMonth:
    visualization: line
    title: Average discount by month
    dimensions: Timestamp
    metrics: AvgDiscount
    score: 100
- AverageDiscountByMonth:
    visualization: line
    title: I'm overloaded
    dimensions: Timestamp
    metrics: AvgDiscount
    score: 20
- OrdersByState:
    visualization:
      map:
        map.type: region
        map.region: us_states
    title: Sales by state
    dimensions: State
    metrics: TotalOrders
- FirstYearSalesDistribution:
    title: First year sales
    description: Distribution of number of orders a user makes in their first year
    query: select count(*) as NUM_USERS, NUM_ORDERS
           from (select count(*) as NUM_ORDERS
                 from [[TransactionTable]] left join [[UserTable]]
                   on [[UserFK]] = [[UserID]]
                 where datediff("MONTH", [[JoinDate]], [[Timestamp]]) <= 12
                 group by [[UserID]])
           group by NUM_ORDERS
    visualization:
      bar:
        graph.dimensions: [NUM_ORDERS]
        graph.metrics: [NUM_USERS]
