<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>guest-embedding.html</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

</head>

<body>

<h1 id="guest-embeds">Guest embeds</h1>
<p>{% include shared/in-page-promo-embedding-workshop.html %}</p>
<p>Guest embeds are a way to embed basic Metabase components in your app
without requiring you to create an account for each person in your
Metabase. But not logging people in to your Metabase has some major
tradeoffs: see <a href="#guest-embed-limitations">limitations</a></p>
<p>Even though you’re not using SSO, guest embeds are still secure:
Metabase will only load the embed if the request has a JWT signed with
the secret shared between your app and your Metabase. The JWT also
includes a reference to the resource to load (like the ID of the
embedded item), and any values for parameters.</p>
<p>You can, however, restrict data in guest embeds for specific people
or groups by <a
href="./static-embedding-parameters.md#restricting-data-in-a-static-embed-with-locked-parameters">locking
parameters</a>.</p>
<h2 id="turning-on-guest-embedding-in-metabase">Turning on guest
embedding in Metabase</h2>
<ol type="1">
<li>Go to <strong>Settings &gt; Admin settings &gt; Embedding &gt; Guest
embeds</strong>.</li>
<li>Toggle <strong>Enable guest embedding</strong>.</li>
</ol>
<h2 id="creating-a-guest-embed">Creating a guest embed</h2>
<figure>
<img src="./images/sharing-embed.png"
alt="Sharing button to embed dashboard" />
<figcaption aria-hidden="true">Sharing button to embed
dashboard</figcaption>
</figure>
<p>To create a guest embed:</p>
<ol type="1">
<li>Go to the item that you want to embed in your website.</li>
<li>Click on the <strong>sharing icon</strong>.</li>
<li>Select <strong>Embed</strong>.</li>
<li>Under <strong>Authentication</strong>, select
<strong>Guest</strong>.</li>
<li>Optional: <a href="./appearance.md">customize the appearance of the
embed</a></li>
<li>Optional: Add parameters to the embed.</li>
<li>Click <strong>Publish</strong>.</li>
<li>Get the code and add it to your app.</li>
</ol>
<figure>
<img src="./images/guest-embed-settings.png"
alt="Guest embed settings" />
<figcaption aria-hidden="true">Guest embed settings</figcaption>
</figure>
<h2 id="editing-paramaters-on-an-embedded-question-or-dashboard">Editing
paramaters on an embedded question or dashboard</h2>
<p>If you change the <a
href="./static-embedding-parameters.md">parameters</a> of your embedded
item:</p>
<ol type="1">
<li>After making your changes, copy the code Metabase generates.</li>
<li>Click <strong>Publish</strong> again.</li>
<li>Update the code on your server so that it matches the code generated
by Metabase.</li>
</ol>
<h2 id="disabling-embedding-for-a-question-or-dashboard">Disabling
embedding for a question or dashboard</h2>
<p>You can find a list of all guest embeds of questions and dashboards
from <strong>Admin settings</strong> &gt; <strong>Embedding</strong>
&gt; <strong>Guest embeds</strong>.</p>
<ol type="1">
<li>Visit the embeddable question or dashboard.</li>
<li>Click on the <strong>sharing icon</strong> (square with an arrow
pointing to the top right).</li>
<li>Select <strong>Embed</strong>.</li>
<li>Select <strong>Guest embedding</strong></li>
<li>Click <strong>Unpublish</strong>.</li>
</ol>
<h2 id="customizing-the-appearance-of-guest-embeds">Customizing the
appearance of guest embeds</h2>
<p>See <a
href="./static-embedding-parameters.md#customizing-the-appearance-of-a-static-embed">Customizing
appearance of guest embeds</a></p>
<h2
id="auto-refreshing-the-results-of-an-embedded-dashboard">Auto-refreshing
the results of an embedded dashboard</h2>
<blockquote>
<p>Auto-refreshing is only available for dashboards, not questions.</p>
</blockquote>
<p>To refresh the results of a dashboard at a specific cadence, you can
parameterize the embedded URL with <code>refresh</code>. For example, to
set an embedded dashboard to refresh every 60 seconds, you would append
<code>refresh=60</code> to the URL.</p>
<p>For example, the following code for generating an iframe URL for a
dashboard would display the dashboard’s title and refresh its results
every 60 seconds.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> iframeUrl <span class="op">=</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  METABASE_SITE_URL <span class="op">+</span> <span class="st">&quot;/embed/dashboard/&quot;</span> <span class="op">+</span> token <span class="op">+</span> <span class="st">&quot;#titled=true&amp;refresh=60&quot;</span><span class="op">;</span></span></code></pre></div>
<p>For the full list options you can parameterize, see <a
href="./static-embedding-parameters.md#customizing-the-appearance-of-a-static-embed">customizing
the appearance of a guest embed</a>.</p>
<h2 id="removing-the-powered-by-metabase-banner">Removing the “Powered
by Metabase” banner</h2>
<figure>
<img src="./images/powered-by-metabase.png" alt="Powered by Metabase" />
<figcaption aria-hidden="true">Powered by Metabase</figcaption>
</figure>
<p>The banner appears on guest embeds created with Metabase’s
open-source version. To remove the banner, you’ll need to upgrade to a
<a href="https://www.metabase.com/product/pro">Pro</a> or <a
href="https://www.metabase.com/product/enterprise">Enterprise</a>
plan.</p>
<h2 id="regenerating-the-guest-embedding-secret-key">Regenerating the
guest embedding secret key</h2>
<p>Your embedding secret key is used to sign JWTs for all of your
embeds.</p>
<ol type="1">
<li>Go to <strong>Admin</strong> &gt; <strong>Embedding</strong> &gt;
<strong>Guest embeds</strong>.</li>
<li>Under <strong>Regenerate secret key</strong>, click
<strong>Regenerate key</strong>.</li>
</ol>
<p>This key is shared across all guest embeds. Whoever has access to
this key could get access to all embedded artifacts, so keep this key
secure. If you regenerate this key, you’ll need to update your server
code with the new key.</p>
<h2 id="resizing-dashboards-to-fit-their-content">Resizing dashboards to
fit their content</h2>
<p>Dashboards are a fixed aspect ratio, so if you’d like to ensure
they’re automatically sized vertically to fit their contents you can use
the <a href="https://github.com/davidjbradshaw/iframe-resizer">iFrame
Resizer</a> script. Metabase serves a copy for convenience:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">&quot;{your-metabase-url}/app/iframeResizer.js&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">iframe</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ot">  src</span><span class="op">=</span><span class="st">&quot;https://metabase.example.com/embed/dashboard/TOKEN&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ot">  onload</span><span class="op">=</span><span class="st">&quot;iFrameResize({}, this)&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="dt">&gt;&lt;/</span><span class="kw">iframe</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Due to iframe-resizer’s licensing changes, we recommend that you use
iframe-resizer version 4.3.2 or lower.</p>
<h2 id="custom-destinations-on-dashboards-in-guest-embeds">Custom
destinations on dashboards in guest embeds</h2>
<p>You can only use the <strong>URL</strong> option for <a
href="../dashboards/interactive.md#custom-destinations">custom
destinations</a> on dashboards with guest embedding. External URLs will
open in a new tab or window.</p>
<p>You can propagate filter values into the external URL, unless the
filter is locked.</p>
<h2 id="translating-guest-embeds">Translating guest embeds</h2>
<p>See <a href="./translations.md">Translating embedded questions and
dashboards</a>.</p>
<h2 id="how-guest-embedding-works">How guest embedding works</h2>
<p>If you want to set up interactive Metabase filters in your iframe,
your web server will need to make requests to Metabase for updated data
each time a website visitor updates the filter widget.</p>
<p>To ask for updated data from Metabase, your web server will generate
a new Metabase embedding URL. For example, if a website visitor enters
the value “true” in an <a
href="./static-embedding-parameters.md#adding-a-filter-widget-to-a-static-embed">embedded
filter widget</a>, your web server will generate a new embedding URL
with an extra parameter:</p>
<pre><code>your_metabase_embedding_url?filter=true</code></pre>
<p>To prevent people from editing the embedding URL to get access to
other parts of your Metabase (e.g., by changing the parameter to
<code>filter=company_secrets</code>), your web server will add a signed
JWT to the new embedding URL:</p>
<pre><code>your_metabase_embedding_url/your_signed_jwt?filter=true</code></pre>
<p>The signed JWT is generated using your <a
href="#regenerating-the-guest-embedding-secret-key">Metabase secret
key</a>. The secret key tells Metabase that the request for filtered
data can be trusted, so it’s safe to display the results at the new
embedding URL. Note that this secret key is shared for all guest embeds,
so whoever has access to that key will have access to all embedded
artifacts.</p>
<p>If you want to embed charts with additional interactive features,
like <a
href="https://www.metabase.com/learn/metabase-basics/querying-and-dashboards/questions/drill-through">drill-down</a>
and <a href="../questions/query-builder/editor.md">self-service
querying</a>, see <a href="./modular-embedding.md">Modular
embedding</a>.</p>
<h2 id="guest-embed-limitations">Guest embed Limitations</h2>
<p>Because guest embeds don’t require you to create a Metabase account
for each person via SSO, Metabase can’t know who is viewing the embed,
and therefore can’t give them access to all their data and all the cool
stuff Metabase can do.</p>
<p>Guest embeds can’t take advantage of:</p>
<ul>
<li><a href="../permissions/row-and-column-security.md">Row and column
security</a></li>
<li><a
href="https://www.metabase.com/learn/metabase-basics/querying-and-dashboards/questions/drill-through">Drill-through</a></li>
<li><a href="../usage-and-performance-tools/usage-analytics.md">usage
analytics</a>.</li>
<li><a href="../questions/query-builder/editor.md">Query
builder</a></li>
<li><a href="./sdk/ai-chat.md">AI chat</a>.</li>
</ul>
<p>For those features, check out <a
href="./modular-embedding.md">Modular embedding with SSO</a>.</p>
<h2 id="further-reading">Further reading</h2>
<ul>
<li><a href="./static-embedding-parameters.md">Parameters for guest
embeds</a>.</li>
<li><a
href="https://github.com/metabase/embedding-reference-apps">Reference
apps repo</a>.</li>
<li><a
href="https://www.metabase.com/learn/metabase-basics/embedding/overview">Strategies
for delivering customer-facing analytics</a>.</li>
<li><a
href="https://www.metabase.com/learn/metabase-basics/embedding/charts-and-dashboards">Publishing
data visualizations to the web</a>.</li>
<li><a href="../configuring-metabase/appearance.md">Customizing
Metabase’s appearance</a>.</li>
</ul>

</body>
</html>
