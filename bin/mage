#! /usr/bin/env bb

(ns mage
  (:require [babashka.tasks :refer [shell]]
            [clojure.string :as str]))

(defn -main [& _]
  (if (or (nil? *command-line-args*)
          (contains? (set *command-line-args*) "-h")
          (contains? (set *command-line-args*) "--help"))
    (do
      (println " ███╗   ███╗ █████╗  ██████╗ ███████╗")
      (println " ████╗ ████║██╔══██╗██╔════╝ ██╔════╝")
      (println " ██╔████╔██║███████║██║  ███╗█████╗")
      (println " ██║╚██╔╝██║██╔══██║██║   ██║██╔══╝")
      (println " ██║ ╚═╝ ██║██║  ██║╚██████╔╝███████╗")
      (println " ╚═╝     ╚═╝╚═╝  ╚═╝ ╚═════╝ ╚══════╝")
      (println "  The Metabase Automation Genius Engine")
      (println "")
      (shell "bb tasks"))
    (shell (str "bb " (str/join " " *command-line-args*)))))

(when (= *file* (System/getProperty "babashka.file"))
  (-main))
