name: Auto-update documentation (release)

env:
  DEFAULT_RELEASE_BRANCH: "release-x.57.x"

on:
  schedule:
    - cron: "0 2 * * 1-5" # Every Monday through Friday at 2 AM UTC
  workflow_dispatch:
    inputs:
      target_branch:
        description: "Target branch for documentation update"
        required: false
        default: "${{ env.DEFAULT_RELEASE_BRANCH }}"
        type: string

jobs:
  update-release-docs:
    name: Call documentation update for release branch
    uses: ./.github/workflows/docs-generate-base.yml
    with:
      target_branch: ${{ inputs.target_branch || env.DEFAULT_RELEASE_BRANCH }}
    secrets:
      automation_token: ${{ secrets.METABASE_AUTOMATION_USER_TOKEN }}
