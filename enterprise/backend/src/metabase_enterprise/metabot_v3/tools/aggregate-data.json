{
  "name": "aggregate-data",
  "description": "This tool aggregates and summarizes data by applying summarization metrics optionally grouped by fields in the data. This tool is ideal for creating simple statistical insights by organizing data into meaningful categories and performing operations such as counting records, summing values, averaging, and more. The tool will NOT return any results to you but display them to the user in the Metabase query editor. Note that this will fire a fresh query - the previous query state will be lost. In case you want to keep parts of the previous state, you need to include them in the parameters.",
  "parameters": {
    "type": "object",
    "properties": {
      "summarize": {
        "type": "object",
        "description": "The 'summarize' parameter allows you to choose the type of summarization to apply, such as counting the number of records, summing numerical values, or calculating averages and standard deviations.",
        "properties": {
          "function": {
            "type": "string",
            "enum": [
              "count",
              "count-distinct",
              "sum",
              "max",
              "min",
              "average",
              "standard-deviation"
            ],
            "description": "The type of summarization function to use. For 'count', column_id should be set to null."
          },
          "column_id": {
            "type": [
              "integer",
              "null"
            ],
            "description": "ID of an optional column for the selected aggregation function. If not specified, set it to null. 'count' cannot take a column_id. All functions other than 'count' require a column_id."
          }
        },
        "required": [
          "function",
          "column_id"
        ],
        "additionalProperties": false
      },
      "group_by": {
        "type": [
          "object",
          "null"
        ],
        "description": "If no grouping is required and you only want to summarize across all rows, set this parameter to null.",
        "properties": {
          "column_id": {
            "type": "integer",
            "description": "The unique identifier of the field to group by."
          },
          "granularity": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "day",
              "week",
              "month",
              "quarter",
              "year",
              null
            ],
            "description": "Specifies the time granularity for date fields (e.g., grouping by month). If the field is not a date type or no granularity is needed, set this parameter to null."
          }
        },
        "required": [
          "column_id",
          "granularity"
        ],
        "additionalProperties": false
      }
    },
    "required": [
      "summarize",
      "group_by"
    ],
    "additionalProperties": false
  }
}
