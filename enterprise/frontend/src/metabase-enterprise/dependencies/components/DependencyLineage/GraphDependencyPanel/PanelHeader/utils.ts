import { match } from "ts-pattern";
import { t } from "ttag";

import type { DependencyGroupType, DependencyNode } from "metabase-types/api";

import { getNodeLabel } from "../../utils";

export function getHeaderLabel(
  node: DependencyNode,
  groupType: DependencyGroupType,
) {
  const nodeLabel = getNodeLabel(node);

  return match(groupType)
    .with("question", () => t`Questions that use ${nodeLabel}`)
    .with("model", () => t`Models that use ${nodeLabel}`)
    .with("metric", () => t`Metrics that use ${nodeLabel}`)
    .with("table", () => t`Table generated by ${nodeLabel}`)
    .with("transform", () => t`Transforms that use ${nodeLabel}`)
    .with("snippet", () => t`Snippets that use ${nodeLabel}`)
    .exhaustive();
}
