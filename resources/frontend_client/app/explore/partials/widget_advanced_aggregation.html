<div>
    <div class="px2 py1 border-bottom">
        <h5>Give me the</h5>
        <label class="Select py1">
            <select id="id_aggregation" ng-model="query.aggregation[0]" ng-options="agg.short as agg.name for agg in table.aggregation_options" ng-change="aggregation_selected()" ng-disabled="readonly"> readonly: {{readonly}}
            </select>
        </label>
        <span class="py1" ng-repeat="aggregation_field in selected_aggregation.fields track by $index">
            <h5>Column:</h5>
            <label class="Select py1">
                <select id="id_filtered_field" ng-model="query.aggregation[$index+1]" ng-options="field[0] as field[1] for field in aggregation_field" ng-disabled="readonly">
                    <option value="">Pick a Field</option>
                </select>
            </label>
        </span>
    </div>

    <div class="px2 py1 border-bottom">
        <h5>Broken out by</h5>

        <ul id="breakout_list">
            <li class="py1 block clearfix" ng-repeat="breakout_field in query.breakout track by $index">
                <a class="text-grey-2 float-right" href="#" ng-if="!readonly" ng-click="removeDimension($index)">
                    <mb-icon name="close" class="mt1" width="16px" height="16px"></mb-icon>
                </a>
                <label class="Select">
                    <select ng-model="query.breakout[$index]" ng-options="br[0] as br[1] for br in table.breakout_options.fields" ng-disabled="readonly">
                    </select>
                </label>
            </li>
        </ul>
        <div class="py1">
            <a class="link" href="#" ng-if="!readonly" ng-click="addDimension()">Add dimension</a>
        </div>
    </div>
</div>
